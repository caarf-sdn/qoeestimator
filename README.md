# Caarf-SDN QoE Estimator

O uso intensivo das redes de computadores baseadas em IP e a crescente demanda de utilização das aplicações de tempo real como voip e outras aplicações multimídia, intensifica a coexistência de tráfegos distintos na rede e a necessidade de um melhor gerenciamento dos recursos da infraestrutura. Soluções tradicionais de qualidade de serviço são propostas, porém são consideradas insuficientes pois são baseadas apenas em métricas de rede. Observa-se, portanto a necessidade de uma transformação na maneira em que as redes devem se comportar, onde as decisões de encaminhamento devem ser centradas nas aplicações e em consequência ter como foco o usuário, e a Qualidade de Experiência (QoE) é fundamental para essa mudança pois muda o foco da avaliação de qualidade, da rede para o usuário. O arcabouço Context-Aware Adaptative Routing Framework (CAARF) e mais especificamente, a sua implementação baseada em redes definidas por software (CAARF-SDN), compõe uma solução de otimização de rede sensível a contexto proposta de forma a viabilizar o encaminhamento do tráfego de rede baseado em informações de contexto de forma dinâmica. Integrando o modelo de contexto do CAARF-SDN estão os conceitos de QoE (Quality of Experience), QoS (Quality of Service) e QoD (Quality of Device). Tendo em vista o que é proposto pelo CAARF-SDN este trabalho tem como objetivo o desenvolvimento de uma solução de coleta da qualidade de experiência que se adeque ao CAARF-SDN. A solução proposta trata-se de de um agente capaz de estimar a qualidade de experiência para aplicações de voz, que ao receber requisições do CAARF-SDN utiliza pacotes UDP para estimar métricas que serão utilizas em seu modelo de estimação da qualidade de experiência.

No CAARF-SDN a estimativa de QoE é feita através de uma formula proposta como adaptação ao modelo E-Model proposta por Neto et al (ADVANCE 2018) levando em consideração o contexto de comutação de pacotes. O modelo E-Model é um modelo objetivo do tipo paramétrico que considera como entrada para sua estimativa, fatores que podem comprometer a transmissão de voz e produz como saída um valor escalar conhecido como R-Factor (Transmission Rating Factor). Devido ao alto nível de correlação entre R-Factor e MOS o valor de R factor pode ser mapeado para métrica de MOS atráves de uma equação fornecida pelo próprio modelo que é aplicada para valores de R-Factor entre 0 e 100. A figura 1 ilustra a equação sugerida pelo modelo E-model (ITU-T E-MODEL)  para derivação do valor MOS.
 
Dessa forma a formula proposta pelo CAARF-SDN em um primeiro momento calcula o valor de R-Factor considerando como entrada para sua estimação de qualidade de voz a média do atraso RTT (Average latency), a variação de atraso (Jitter) e a porcentagem de pacotes perdidos (Packet loss), fatores que comprometem a qualidade em um fluxo de voz e em um segundo momento, aplica o valor de R-Factor a equação fornecida pelo modelo E-model para calcular o valor de MOS que permite verificar o nível de QoE. 
 
No algoritmo é definido um valor chamado de latência efetiva (Effective Latency) como a combinação de métricas de atraso e jitter que caso seja maior que o valor de atraso de 160 milissegundo (devido a algum congestionamento de rede) penaliza o R-Factor e a qualidade respectivamente
